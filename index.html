<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Connect MetaMask - Base Network</title>
  </head>
  <body>
    <h2>اتصال به متامسک (شبکه Base)</h2>
    <button id="connectButton">اتصال به متامسک</button>

    <script>
      const connectButton = document.getElementById('connectButton');

      async function connectWallet() {
        if (typeof window.ethereum === 'undefined') {
          alert("MetaMask نصب نشده است!");
          return;
        }

        try {
          // درخواست اتصال به حساب
          const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
          const account = accounts[0];
          alert("اتصال موفق! آدرس شما:\n" + account);

          // بررسی شبکه Base
          const baseChainId = '0x2105'; // Chain ID برای Base Mainnet
          const currentChainId = await window.ethereum.request({ method: 'eth_chainId' });

          if (currentChainId !== baseChainId) {
            await window.ethereum.request({
              method: 'wallet_switchEthereumChain',
              params: [{ chainId: baseChainId }],
            });
            alert("به شبکه Base متصل شدی ✅");
          }
        } catch (err) {
          console.error(err);
          alert("خطا در اتصال: " + err.message);
        }
      }

      connectButton.addEventListener('click', connectWallet);
    </script>
  </body>
</html>
